<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="Winwheel.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"
      integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/@simondmc/popup-js@1.4.2/popup.min.js"></script>
    <style>
      .wheel {
        background-image: url("/wheel.png");
        background-repeat: no-repeat;
        background-position: center;
        vertical-align: middle;
        padding-top: 4px;
      }
      .popup-close {
        display: none;
      }
    </style>
  </head>
  <body>
    <table cellpadding="0" cellspacing="0" border="0">
      <td width="438" height="582" class="wheel" align="center" valign="center">
        <canvas id="canvas" width="434" height="434">
          <p style="{color: white}" align="center">
            Sorry, your browser doesn't support canvas. Please try another.
          </p>
        </canvas>
      </td>
    </table>
    <button onclick="theWheel.startAnimation()">Start!</button>
    <script>
      let theWheel = new Winwheel({
        textAlignment: "outer",
        textFontSize: 24,
        innerRadius: 75,
        numSegments: 4,
        fillStyle: "#e7706f",
        lineWidth: 3,
        segments: [
          { fillStyle: "#eae56f", text: "Segment 1" },
          { fillStyle: "#89f26e", text: "Segment 2" },
          { fillStyle: "#7de6ef", text: "Segment 3" },
          { fillStyle: "#e7706f", text: "Segment 4" },
        ],
        // Definition of the animation
        animation: {
          type: "spinToStop",
          duration: 5,
          spins: 8,
          callbackFinished: (value) => {
            console.log(`WON ${value.text}`);
            const popup = new Popup({
              id: "-popup",
              title: `${value.text}`,
              content: `Ballmaster5 won ${value.text}!`,
              showImmediately: true,
            });
            setTimeout(() => {
              popup.hide();
              theWheel.stopAnimation(false);
              theWheel.rotationAngle = 0;
              theWheel.draw();
            }, 5000);
          },
        },
      });
    </script>
  </body>
</html>
